<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>openid-client-effect</title><meta name="description" content="Documentation for openid-client-effect"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">openid-client-effect</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>openid-client-effect</h1></div><div class="tsd-panel tsd-typography"><a id="openid-client-effect" class="tsd-anchor"></a><h1 class="tsd-anchor-link">openid-client-effect<a href="#openid-client-effect" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A fully-featured OpenID Connect client for <strong>Bun</strong>, built with <strong>Effect</strong>, <strong>Effect Platform HTTP Client</strong>, and <strong>Effect Schema</strong>.</p>
<a id="⚠️-ai-generated-project-notice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">⚠️ AI-generated project notice<a href="#⚠️-ai-generated-project-notice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project was authored with AI assistance and is provided as-is.</p>
<p>Before using it in production, you should:</p>
<ul>
<li>Perform a full security review (including token handling, key management, and dependency auditing).</li>
<li>Validate behavior against the OpenID Connect / OAuth 2.0 specs and your provider-specific requirements.</li>
<li>Add integration tests for your exact identity provider and deployment environment.</li>
<li>Review and harden error handling, logging, and operational controls.</li>
</ul>
<p>Use this library with caution until it has been thoroughly reviewed and tested by humans in your context.</p>
<a id="features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>OpenID Provider Discovery (<code>/.well-known/openid-configuration</code>)</li>
<li>Effect Platform HTTP Client for all protocol HTTP calls</li>
<li>Runtime-safe OIDC modeling with <code>effect/Schema</code></li>
<li>Custom typed error classes for excellent DX</li>
<li>Authorization URL creation (PKCE + standard OIDC params)</li>
<li>Token exchange and refresh flows</li>
<li>UserInfo retrieval</li>
<li>Token introspection and revocation</li>
<li>RP-initiated logout URL generation</li>
<li>JWKS retrieval and ID token verification (<code>jose</code>)</li>
</ul>
<a id="install" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Install<a href="#install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

<a id="quick-start" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Quick start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Effect</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;effect&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">OpenIdClient</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;openid-client-effect&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">client</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Effect</span><span class="hl-1">.</span><span class="hl-0">runPromise</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">OpenIdClient</span><span class="hl-1">.</span><span class="hl-0">discover</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">issuer:</span><span class="hl-1"> </span><span class="hl-2">&quot;https://your-issuer.example.com&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">clientId:</span><span class="hl-1"> </span><span class="hl-2">&quot;your-client-id&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">clientSecret:</span><span class="hl-1"> </span><span class="hl-2">&quot;your-client-secret&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">redirectUri:</span><span class="hl-1"> </span><span class="hl-2">&quot;https://your-app.example.com/callback&quot;</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">authorizationUrl</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Effect</span><span class="hl-1">.</span><span class="hl-0">runPromise</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-0">createAuthorizationUrl</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">scope:</span><span class="hl-1"> </span><span class="hl-2">&quot;openid profile email&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">state:</span><span class="hl-1"> </span><span class="hl-4">crypto</span><span class="hl-1">.</span><span class="hl-0">randomUUID</span><span class="hl-1">(),</span><br/><span class="hl-1">    </span><span class="hl-4">nonce:</span><span class="hl-1"> </span><span class="hl-4">crypto</span><span class="hl-1">.</span><span class="hl-0">randomUUID</span><span class="hl-1">(),</span><br/><span class="hl-1">    </span><span class="hl-4">code_challenge_method:</span><span class="hl-1"> </span><span class="hl-2">&quot;S256&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">code_challenge:</span><span class="hl-1"> </span><span class="hl-2">&quot;...&quot;</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">token</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Effect</span><span class="hl-1">.</span><span class="hl-0">runPromise</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-0">exchangeAuthorizationCode</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">code:</span><span class="hl-1"> </span><span class="hl-2">&quot;returned-code&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">codeVerifier:</span><span class="hl-1"> </span><span class="hl-2">&quot;original-pkce-verifier&quot;</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">claims</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Effect</span><span class="hl-1">.</span><span class="hl-0">runPromise</span><span class="hl-1">(</span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-0">verifyIdToken</span><span class="hl-1">(</span><span class="hl-4">token</span><span class="hl-1">.</span><span class="hl-4">id_token</span><span class="hl-1">!));</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">userInfo</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Effect</span><span class="hl-1">.</span><span class="hl-0">runPromise</span><span class="hl-1">(</span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-0">fetchUserInfo</span><span class="hl-1">(</span><span class="hl-4">token</span><span class="hl-1">.</span><span class="hl-4">access_token</span><span class="hl-1">));</span>
</code><button type="button">Copy</button></pre>

<a id="error-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Error handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All client methods return <code>Effect</code> values with rich custom errors from <code>src/errors.ts</code>, including:</p>
<ul>
<li><code>DiscoveryError</code></li>
<li><code>MissingEndpointError</code></li>
<li><code>HttpRequestError</code></li>
<li><code>OAuthErrorResponse</code></li>
<li><code>SchemaValidationError</code></li>
<li><code>IdTokenVerificationError</code></li>
</ul>
<p>This enables precise pattern matching and ergonomic recovery for consumer applications.</p>
<a id="api-docs-github-pages" class="tsd-anchor"></a><h2 class="tsd-anchor-link">API docs (GitHub Pages)<a href="#api-docs-github-pages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>API docs are generated from JSDoc using TypeDoc and published from the <code>docs/</code> directory.</p>
<p>Build docs locally:</p>
<pre><code class="bash"><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">docs:build</span>
</code><button type="button">Copy</button></pre>

<p>Then publish <code>docs/</code> via GitHub Pages (Settings → Pages → Deploy from branch, <code>/docs</code> folder).</p>
<p>This repository also includes a GitHub Actions workflow at <code>.github/workflows/docs.yml</code> that builds and deploys <code>docs/</code> to GitHub Pages on pushes to <code>main</code>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#openid-client-effect"><span>openid-<wbr/>client-<wbr/>effect</span></a><ul><li><a href="#⚠️-ai-generated-project-notice"><span>⚠️ AI-<wbr/>generated project notice</span></a></li><li><a href="#features"><span>Features</span></a></li><li><a href="#install"><span>Install</span></a></li><li><a href="#quick-start"><span>Quick start</span></a></li><li><a href="#error-handling"><span>Error handling</span></a></li><li><a href="#api-docs-github-pages"><span>API docs (<wbr/>Git<wbr/>Hub <wbr/>Pages)</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">openid-client-effect</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
